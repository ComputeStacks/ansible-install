{% for host in groups['nodes'] %}
Host {{ hostvars[host].ansible_hostname }}
  User root
  HostName {{ hostvars[host].consul_listen_ip }}
  Port {{ hostvars[host].ssh_port }}
{{ '' }}
{% endfor %}
{% for host in groups['backup_server'] %}
Host {{ hostvars[host].ansible_hostname }}
  User root
  HostName {{ hostvars[host].controller_ip }}
  Port {{ hostvars[host].ssh_port }}
{{ '' }}
{% endfor %}
{% if 'metrics' not in group_names %}
{% for host in groups['metrics'] %}
Host {{ hostvars[host].ansible_hostname }}
  User root
  HostName {{ hostvars[host].controller_endpoint }}
  Port {{ hostvars[host].ssh_port }}
{{ '' }}
{% endfor %}
{% endif %}
{% if 'registry' not in group_names %}
{% for host in groups['registry'] %}
Host {{ hostvars[host].ansible_hostname }}
  User root
  HostName {{ hostvars[host].controller_ip }}
  Port {{ hostvars[host].ssh_port }}
{{ '' }}
{% endfor %}
{% endif %}

Host *
  ServerAliveInterval 60
  TCPKeepAlive no
